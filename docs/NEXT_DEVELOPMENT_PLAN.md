# CAMS 다음 개발 진행 계획

## 📅 작성일: 2025-12-16

---

## 🎯 목표: "실제로 현장/본사에서 매일 쓰는 수준"

---

## 📋 우선순위 Top 10

### 1. 배포 안정화 (Railway) ✅ 진행중
| 항목 | 상태 | 설명 |
|------|------|------|
| Node 엔진 버전 고정 | ✅ 완료 | `engines: { node: "18.x", npm: ">=9.0.0" }` |
| 환경변수 표준화 | ✅ 완료 | `.env.example` 업데이트 (SMTP, Firebase, CLIENT_URL) |
| CORS 설정 | ✅ 완료 | Railway 도메인 허용 |
| 정적파일 서빙 | ✅ 완료 | `/uploads` 경로 설정 |

### 2. 권한/라우팅 완성 ⏳ 대기
| 항목 | 상태 | 설명 |
|------|------|------|
| UI 메뉴 노출 + API 권한검사 일관화 | ⏳ | 사용자 유형별 메뉴/API 매핑 |
| 미들웨어 권한 체크 | ⏳ | `authenticate` + `authorize` 미들웨어 |
| 프론트엔드 라우트 가드 | ⏳ | `ProtectedRoute` 컴포넌트 강화 |

### 3. 기초정보(마스터) 관리 화면/API 완성 ⏳ 대기
| 마스터 데이터 | 상태 | 설명 |
|--------------|------|------|
| 차종 (car_models) | ⏳ | CRUD + 참조무결성 |
| 톤수 (tonnage) | ⏳ | 선택형 콤보 |
| 재질 (material) | ⏳ | 원재료 정보 |
| 제작처 (makers) | ⏳ | 협력사 관리 |
| 생산처 (plants) | ⏳ | 공장 관리 |

### 4. QR 세션 + GPS 기록 실데이터 품질 확보 ⏳ 대기
| 항목 | 상태 | 설명 |
|------|------|------|
| QR 스캔 시점/좌표/정확도 저장 | ⏳ | `qr_sessions` 테이블 |
| 역지오코딩 (장소명) | ⏳ | GPS → 주소 변환 |
| 8시간 세션 만료 | ✅ 완료 | 로직 구현됨 |
| GPS 이탈 감지 | ⏳ | 허용 반경 체크 |

### 5. 생산처 일상/정기점검 입력 UX 마무리 ⏳ 대기
| 항목 | 상태 | 설명 |
|------|------|------|
| 스캔 → 점검 → 생산수량 → 완료 | ⏳ | 끊김 없는 플로우 |
| 세척/습합 입력 | ⏳ | 정기점검 연동 |
| 수리요청 바로가기 | ⏳ | NG 발생 시 |
| 이관 요청 바로가기 | ⏳ | 4M 체크 연동 |

### 6. 수리요청~완료~확인 종단 흐름 QA ⏳ 대기
| 항목 | 상태 | 설명 |
|------|------|------|
| 사진첨부 | ⏳ | 수리 전/후 사진 |
| 상태변경 | ⏳ | 요청→접수→진행→완료→확인 |
| 담당배정 | ⏳ | 제작처 담당자 |
| 귀책협의 | ⏳ | 1차/2차 협의 |
| 승인/반려 | ⏳ | 워크플로우 |

### 7. 알람/이상발생 자동연계 ⏳ 대기
| 이벤트 | 상태 | 설명 |
|--------|------|------|
| NG 발생 | ⏳ | 자동 알람 생성 |
| 점검 지연 | ⏳ | D-7, D-3, D-1 알람 |
| 타수 초과 | ⏳ | 90% 도달 시 알람 |
| GPS 이탈 | ⏳ | 허용 반경 초과 시 |

### 8. 통계/리포트 (주간·월간) ⏳ 대기
| 리포트 | 상태 | 설명 |
|--------|------|------|
| 점검 완료율 | ⏳ | 일상/정기 점검 |
| 수리 TAT | ⏳ | 평균 처리 시간 |
| NG Top | ⏳ | 빈도별 정렬 |
| 제작처 성과 | ⏳ | 납기준수율/품질점수 |
| 이관 리드타임 | ⏳ | 평균 이관 소요일 |

### 9. 대시보드 데이터 API 묶음화 ⏳ 대기
| API | 상태 | 설명 |
|-----|------|------|
| `/dashboard/plant/summary` | ⏳ | 생산처 KPI + 목록 + 차트 |
| `/dashboard/maker/summary` | ⏳ | 제작처 KPI + 목록 + 차트 |
| `/dashboard/developer/summary` | ⏳ | 개발담당 KPI + 목록 + 차트 |

### 10. 운영감사/추적 (이력/변경로그) ⏳ 대기
| 항목 | 상태 | 설명 |
|------|------|------|
| 마스터 수정 이력 | ⏳ | 누가/언제/무엇을 |
| 승인/반려 이력 | ⏳ | 워크플로우 로그 |
| 귀책비율 변경 이력 | ⏳ | 분쟁 대응용 |

---

## 📊 대시보드 구성 제안

### A. 생산처 대시보드 (현장 "오늘 할 일" 중심)

**핵심**: QR 스캔을 안 하더라도 "오늘 해야 할 점검/이슈"가 한 화면에 표시

| 위젯 | 설명 |
|------|------|
| 오늘의 점검 일정 | 일상/정기 + 미완료 건 "즉시 시작" |
| 긴급 알람 | 타수 초과/점검 지연/NG 발생 (심각도 색상) |
| 금주 생산·NG 요약 | 생산수량, 평균가동률, NG율 추세 |
| 최근 스캔 TOP 금형 | 자주 쓰는 금형 빠른 진입 |
| 이관 요청 진행현황 | 반출/입고/사진/GPS 체크 진행률 |

### B. 협력사(제작처) 대시보드 ("작업 backlog + 납기/품질" 중심)

| 위젯 | 설명 |
|------|------|
| 진행중 작업 | 제작 단계별 수량 (설계/가공/조립/시운전) |
| 수리 요청함 | 신규/진행/검수대기/귀책협의중 |
| 금주 납품/시운전 일정 | 일정 지연 리스크 표시 |
| QR 작업 바로가기 | QR 재발급/부착확인/출고·입고 처리 |
| 성과 KPI | 평균 제작기간, 수리 TAT, 재발률 |

### C. 개발담당자(본사) 대시보드 ("승인/리스크/협력사 성과" 중심)

| 위젯 | 설명 |
|------|------|
| 승인 대기함 | 설계/시운전/귀책판정/이관승인 큐 |
| 리스크 금형 리스트 | 타수 임박, NG 반복, 점검지연, GPS 이탈 |
| 협력사 성과 비교 | 납기준수율/품질점수/수리비/귀책 분포 |
| 프로젝트/차종 필터 | 즉시 드릴다운 |
| 리포트 원클릭 | 월간 요약 PDF/엑셀 생성 |

---

## 🔧 대시보드 데이터 API 구조

역할별 3종 세트:

```javascript
// 1. KPI Summary
{
  inspections_due: 5,
  inspections_overdue: 2,
  repairs_pending: 3,
  alerts_unread: 8,
  ng_rate: 2.5
}

// 2. Action List (Top N)
{
  pending_approvals: [...],
  pending_inspections: [...],
  pending_repairs: [...]
}

// 3. Trends (7일/30일)
{
  inspection_completion_rate: [...],
  repair_count: [...],
  ng_count: [...]
}
```

---

## 📅 개발 일정 (예상)

| 주차 | 작업 |
|------|------|
| Week 1 | 배포 안정화, 권한/라우팅 완성 |
| Week 2 | 마스터 관리, QR 세션 품질 확보 |
| Week 3 | 점검 UX 마무리, 수리 종단 흐름 |
| Week 4 | 알람 자동연계, 통계/리포트 |
| Week 5 | 대시보드 API 묶음화, 운영감사 |

---

*이 문서는 2025-12-16 작성되었습니다.*
